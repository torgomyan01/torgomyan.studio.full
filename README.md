# SWAPPE - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –±–∞—Ä—Ç–µ—Ä–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ –∏ –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–π

> **–í–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –æ–±–º–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ —É—Å–ª—É–≥–∞–º–∏ –º–µ–∂–¥—É –±–∏–∑–Ω–µ—Å–∞–º–∏ —Å AI-–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π**

[![Next.js](https://img.shields.io/badge/Next.js-15.2.4-black)](https://nextjs.org/)
[![React](https://img.shields.io/badge/React-19.1.1-blue)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5-blue)](https://www.typescriptlang.org/)
[![Prisma](https://img.shields.io/badge/Prisma-6.9.0-green)](https://www.prisma.io/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0-orange)](https://www.mysql.com/)

---

## üéØ –ß—Ç–æ —ç—Ç–æ?

**SWAPPE** ‚Äî —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –≥–¥–µ –±–∏–∑–Ω–µ—Å—ã –Ω–∞—Ö–æ–¥—è—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤ –¥–ª—è –æ–±–º–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞–º–∏, —É—Å–ª—É–≥–∞–º–∏ –∏ –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–π. –° AI-–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ—Ç DonatAI.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üè¢ **–ü—Ä–æ—Ñ–∏–ª–∏ –∫–æ–º–ø–∞–Ω–∏–π** - –ò–ù–ù, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è, –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
- üìã **–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (Offers)** - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –æ–±–º–µ–Ω–∞ —Å —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ
- ü§ù **–°–¥–µ–ª–∫–∏ (Deals)** - —Å–∏—Å—Ç–µ–º–∞ –±–∞—Ä—Ç–µ—Ä–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ –º–µ–∂–¥—É –∫–æ–º–ø–∞–Ω–∏—è–º–∏
- üí¨ **Real-time —á–∞—Ç—ã** - WebSocket —á–∞—Ç—ã –ø–æ —Å–¥–µ–ª–∫–∞–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- üí≥ **–¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã** - free/base/pro/premium —Å –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ–º
- üí∞ **–ü–ª–∞—Ç–µ–∂–∏** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Yookassa
- ‚≠ê **–û—Ç–∑—ã–≤—ã** - —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–∑—ã–≤–æ–≤ –æ –∫–æ–º–ø–∞–Ω–∏—è—Ö
- ü§ñ **AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç** - DonatAI –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
- üë• **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** - –±–æ–Ω—É—Å—ã –∑–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js >= 20.13.1
- MySQL 8.0+
- Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repo-url>
cd swappe

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env.prod
cp .env.prod.example .env.prod
# –ó–∞–ø–æ–ª–Ω–∏—Ç—å: DATABASE_URL, NEXTAUTH_SECRET, OPENAI_API_KEY

# 4. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
npx prisma generate
npx prisma db push

# 5. –ó–∞–ø—É—Å–∫ (2 —Ç–µ—Ä–º–∏–Ω–∞–ª–∞)
npm run dev     # Next.js –Ω–∞ –ø–æ—Ä—Ç—É 3000
npm run socket  # WebSocket –Ω–∞ –ø–æ—Ä—Ç—É 3004
```

### Production

```bash
npm run build
npm start       # –ø–æ—Ä—Ç 3003
```

### Docker (—Å DonatAI)

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (SWAPPE + DonatAI + DB + Redis)
make run

# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
make open

# –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
make help
```

**[‚Üí –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è](./docs/getting-started/quickstart.md)**

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üéì –î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö

- [üìò –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](./docs/getting-started/quickstart.md) - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞ 5 –º–∏–Ω—É—Ç
- [üìÑ –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](./docs/getting-started/project-overview.md) - –ß—Ç–æ —Ç–∞–∫–æ–µ SWAPPE
- [‚öôÔ∏è Make –∫–æ–º–∞–Ω–¥—ã](./docs/getting-started/make-commands.md) - –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- [üåê –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](./docs/architecture/overview.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- [üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](./docs/architecture/database.md) - MySQL —Å—Ö–µ–º–∞ –∏ Prisma
- [üí¨ WebSocket](./docs/architecture/websocket.md) - Real-time —á–∞—Ç—ã
- [üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è](./docs/architecture/authentication.md) - NextAuth –∏ –∑–∞—â–∏—Ç–∞ —Ä–æ—É—Ç–æ–≤
- [üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤](./docs/architecture/file-structure.md) - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞

### üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- [ü§ù –°–¥–µ–ª–∫–∏ (Deals)](./docs/features/deals.md) - –°–∏—Å—Ç–µ–º–∞ –±–∞—Ä—Ç–µ—Ä–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
- [üí≥ –ü–æ–¥–ø–∏—Å–∫–∏](./docs/features/subscriptions.md) - –¢–∞—Ä–∏—Ñ—ã –∏ –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ

### üìö –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫

- [‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](./docs/reference/environment.md) - –í—Å–µ .env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- [ü©∫ Troubleshooting](./docs/reference/troubleshooting.md) - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### üìë –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**[‚Üí –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](./docs/index.md)**

---

## üîó –í–∞–∂–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### Production
- **Dev Server**: https://dev.swappe.ru/
- **Database Admin**: http://81.177.140.232:8080/
- **Server IP**: 81.177.140.232

### Local Development
- **SWAPPE Web**: http://localhost:3003
- **DonatAI API**: http://localhost:8001/docs
- **WebSocket**: ws://localhost:3004

---

## üíª –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### Make –∫–æ–º–∞–Ω–¥—ã (—Å Docker)

```bash
make help          # –í—Å–µ –∫–æ–º–∞–Ω–¥—ã
make run           # –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫
make dev           # –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫
make down          # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
make logs          # –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
make logs-ai       # –õ–æ–≥–∏ DonatAI
make db-shell      # PostgreSQL shell
make migrate       # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (DonatAI)
make clean         # –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
make rebuild       # –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
make rebuild       # –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
```

**[‚Üí –ü–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ Make –∫–æ–º–∞–Ω–¥](./docs/getting-started/make-commands.md)**

### NPM –∫–æ–º–∞–Ω–¥—ã

```bash
npm run dev        # Development (–ø–æ—Ä—Ç 3000)
npm run build      # Production build
npm start          # Production server (–ø–æ—Ä—Ç 3003)
npm run socket     # WebSocket —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 3004)
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend
- **Next.js 15.2.4** - App Router, Server Actions
- **React 19.1.1** - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **TypeScript 5** - –¢–∏–ø–∏–∑–∞—Ü–∏—è
- **Tailwind CSS 4.1.11** - –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- **Redux Toolkit 2.5.1** - State management

### Backend
- **Next.js API Routes** - REST API
- **Server Actions** - Server-side logic
- **Prisma 6.9.0** - ORM
- **NextAuth 4.24.11** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **WebSocket (ws 8.18.3)** - Real-time

### Database & Services
- **MySQL** - –û—Å–Ω–æ–≤–Ω–∞—è –ë–î
- **PostgreSQL + pgvector** - DonatAI –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
- **Redis** - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Yookassa** - –ü–ª–∞—Ç–µ–∂–∏

### AI (DonatAI)
- **OpenAI GPT-4o** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–¥–µ–π
- **OpenAI Embeddings** - –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
- **FastAPI** - AI API

**[‚Üí –î–µ—Ç–∞–ª–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π](./docs/getting-started/project-overview.md)**

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
swappe/
‚îú‚îÄ‚îÄ @types/              # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ prisma/              # Prisma —Å—Ö–µ–º–∞ –ë–î
‚îú‚îÄ‚îÄ public/              # –°—Ç–∞—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/             # Next.js App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ actions/     # Server Actions (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/         # API Routes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ account/     # –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/       # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ im/          # –ß–∞—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ offer/       # –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ components/      # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ utils/           # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ middleware.ts    # Auth middleware
‚îú‚îÄ‚îÄ ws-server.js         # WebSocket —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ DonatAI/             # AI –º–æ–¥—É–ª—å (FastAPI)
‚îú‚îÄ‚îÄ docs/                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ Makefile             # Docker –∫–æ–º–∞–Ω–¥—ã
```

**[‚Üí –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ](./docs/architecture/file-structure.md)**

---

## üéØ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- [x] ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (NextAuth)
- [x] ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏ –∫–æ–º–ø–∞–Ω–∏–π (–ò–ù–ù, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)
- [x] ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (Offers) —Å —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ
- [x] ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å–¥–µ–ª–æ–∫ (Deals)
- [x] ‚úÖ Real-time —á–∞—Ç—ã (WebSocket)
- [x] ‚úÖ –¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã (free/base/pro/premium)
- [x] ‚úÖ –ü–ª–∞—Ç–µ–∂–∏ (Yookassa)
- [x] ‚úÖ –û—Ç–∑—ã–≤—ã –æ –∫–æ–º–ø–∞–Ω–∏—è—Ö
- [x] ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- [x] ‚úÖ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

### AI —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (DonatAI)
- [x] ‚úÖ AI Matching Engine - –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤
- [x] ‚úÖ Collaboration Ideas - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–¥–µ–π (GPT-4o)
- [x] ‚úÖ Deal Proposals - –≥–æ—Ç–æ–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å–¥–µ–ª–æ–∫

**üéâ MVP –ì–û–¢–û–í –ö PRODUCTION!**

---

## üñ•Ô∏è Production Server

### Quick Access

- **Dev Server**: https://dev.swappe.ru/
- **Server IP**: 81.177.140.232
- **Database Admin**: http://81.177.140.232:8080/

### Running Services

**PM2 Processes:**
```bash
pm2 list    # View all processes
```
- `swappe` - Next.js (port 3003)
- `swappe-socket` - WebSocket (port 3004)
- `donatai-api` - FastAPI AI (port 8001)

**Docker Containers:**
```bash
docker ps   # View containers
```
- `donatai_postgres` - PostgreSQL + pgvector (port 5433)
- `donatai_redis` - Redis (port 6380)

### Essential Commands

```bash
# Status check
pm2 list && docker ps

# Restart services
pm2 restart swappe swappe-socket
pm2 restart donatai-api

# View logs
pm2 logs swappe
pm2 logs donatai-api

# Health check
curl http://localhost:8001/health
```

**[‚Üí Production Server Guide](./docs/reference/production-server.md)** - Complete deployment guide with SSH access, code updates, troubleshooting, backups, and monitoring.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: `make logs` (–ª–æ–∫–∞–ª—å–Ω–æ) –∏–ª–∏ `pm2 logs` (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `make health` (–ª–æ–∫–∞–ª—å–Ω–æ) –∏–ª–∏ `pm2 list && docker ps` (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
3. –ò–∑—É—á–∏—Ç–µ [docs/reference/troubleshooting.md](./docs/reference/troubleshooting.md) - —Ä–µ—à–µ–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º
4. –ò–∑—É—á–∏—Ç–µ [docs/](./docs/index.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
